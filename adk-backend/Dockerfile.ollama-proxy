FROM python:3.13-slim

# Install dependencies for LiteLLM proxy
RUN pip install fastapi uvicorn litellm requests

# Create app user
RUN useradd --create-home appuser

# Copy the proxy script
WORKDIR /home/appuser
COPY --chown=appuser:appuser ollama_proxy.py ./ollama_proxy.py

# Switch to non-root user
USER appuser

# Expose Ollama default port
EXPOSE 11434

# Command to run the proxy
CMD ["python", "ollama_proxy.py"]
